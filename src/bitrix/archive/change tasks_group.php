<?php

use Bitrix\Main\Loader;
use Bitrix\Tasks\Manager;

Loader::includeModule('tasks');

$rows = Manager\Task::getList(12, [
    'order' => ['ID' => 'ASC'],
    'legacyFilter' => [
        'GROUP_ID' => 15,
    ],
    'select' => ['*']
], []);

$ids = [];
$sucess = 0;
$errors = [];
foreach ($rows['DATA'] as $row) {
    $result = Manager\Task::update(12, $row['ID'], ['GROUP_ID' => 16]);

    if (count($result['ERRORS']) <= 0) {
        $sucess++;
        $ids[] = (int) $result['DATA']['ID'];
        continue;
    }

    $errors[] = $result['ERRORS'];
}

echo '<pre>', var_dump($sucess, count($errors), $errors), '</pre>';

// $ids = [75, 117, 118, 119, 120, 121, 122, 129, 130, 136, 150, 152, 155, 176, 187, 188, 189, 190, 191, 195, 196, 208, 225, 227, 231, 245, 246, 247, 248, 249, 250, 251, 282, 296, 317, 319, 335, 351, 358, 360, 372, 373, 395, 396, 397, 398, 399, 405, 414, 415, 423, 425, 426, 427, 428, 430, 431, 432, 433, 435, 436, 437, 439, 440, 441, 442, 443, 444, 446, 447, 448, 449, 450, 451, 452, 453, 454, 462, 463, 477, 478, 479, 484, 486, 487, 488, 489, 490, 492, 494, 527, 528, 529, 532, 533, 534, 535, 536, 537, 540, 547, 600, 608, 609, 612, 613, 641, 642, 644, 645, 646, 664, 717, 725, 734, 736, 758, 760, 862, 871, 884, 885, 886, 887, 888, 890, 891, 892, 893, 894, 895, 914, 918, 932, 933, 934, 974, 994, 995, 996, 1004, 1006, 1020, 1029, 1048, 1056, 1060, 1061, 1078, 1079, 1080, 1091, 1092, 1093, 1095, 1099, 1102, 1112, 1119, 1120, 1121, 1122, 1123, 1124, 1125, 1126, 1129, 1165, 1182, 1235, 1246, 1267, 1338, 1398, 1439, 1441, 1442, 1444, 1446, 1447, 1451, 1454, 1455, 1456, 1457, 1458, 1459, 1466, 1470, 1531, 1543, 1544, 1545, 1577, 1580, 1614, 1615, 1616, 1617, 1618, 1619, 1620, 1621, 1624, 1625, 1626, 1627, 1628, 1629, 1637, 1638, 1640, 1641, 1642, 1689, 1856, 1858, 1859, 1860, 1861, 1862, 1863, 1864, 1865, 1866, 1867, 1868, 1875, 1882, 1887, 1888, 1889, 1890, 1891, 1892, 1893, 1896, 1897, 1898, 1899, 1900, 1945, 1955, 1966, 1968, 1970, 1971, 1972, 1973, 1974, 1975, 1976, 1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 2000, 2002, 2003, 2004, 2025, 2032, 2039, 2070, 2071, 2072, 2075, 2076, 2077, 2078, 2079, 2080, 2081, 2082, 2083, 2084, 2085, 2086, 2087, 2088, 2089, 2090, 2091, 2092, 2093, 2094, 2099, 2152, 2158, 2230, 2245, 2264, 2265, 2269, 2284, 2303, 2327, 2384, 2433, 2434, 2467, 2488, 2519, 2565, 2566, 2567, 2568, 2569, 2570, 2571, 2572, 2573, 2574, 2575, 2576, 2577, 2578, 2579, 2580, 2581, 2582, 2584, 2585, 2586, 2587, 2588, 2629, 2630, 2648, 2667, 2668, 2671, 2672, 2695, 2705, 2742, 2748, 2754, 2897, 2898, 2967, 2968];

if (count($ids) <= 0) {
    return;
}

$sucess = 0;
$errors = [];
foreach ($ids as $id) {
    $result = Manager\Task::update(12, $id, [
        'SE_TAG' => [
            ['NAME' => 'Битрикс24'], 
            ['NAME' => 'Автоматизация маркетинга'],
        ]
    ]);

    if (count($result['ERRORS']) <= 0) {
        $sucess++;
        continue;
    }

    $errors[] = $result['ERRORS'];
}

echo '<pre>', var_dump($sucess, count($errors), $errors), '</pre>';
